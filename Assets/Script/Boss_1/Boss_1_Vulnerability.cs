using System.Collections;
using System.Collections.Generic;
using UnityEngine;
using UnityEngine.Events;

public class Boss_1_Vulnerability : BossTakeDamageCollider
{
    public UnityEvent vulnerabilirabilityDestroyed;
    [SerializeField] C_Boss_1_AttackCollider boss_1_AttackCollider;
    [SerializeField] Boss_1_ShootLaser boss_1_ShootLaser;
    public bool isDestroyed;

    private void Start()
    {
        TakeDamageEvent.AddListener(a =>
        {
            isDestroyed = true;
            CloseCollider();
            boss_1_AttackCollider.CloseCollider();
            boss_1_AttackCollider.isDestroyed = true;

            vulnerabilirabilityDestroyed?.Invoke();
            parent.SetActive(false);
            boss_1_ShootLaser.gameObject.SetActive(false);
        });
    }

    public override void OpenCollider()
    {
        if (!isDestroyed)
        {
            base.OpenCollider();
        }
    }

    public override void CloseCollider()
    {
        base.CloseCollider();
    }

    public void Reactivate()
    {
        parent.SetActive(true);
        isDestroyed = false;
        boss_1_AttackCollider.isDestroyed = false;
        boss_1_ShootLaser.gameObject.SetActive(true);
    }
}
